import { TranscriptProcessor } from '../services/transcriptProcessor';
import { ParallelAudioGenerator } from '../services/parallelAudioGenerator';
import { AudioAssembler } from '../services/audioAssembler';

const testText = `{{First section Introduction with a catchy hook content here, 700-1000 words} Ever felt like you're being sized up, not for who you are, but for where you're from? Like the subtle lilt in your voice, the way you roll your Rs, instantly boxes you in? That's the frustrating reality for many people from "poor" countries – the immediate assumption that they're somehow less than, less deserving, less capable. It's a prejudice as old as time, as insidious as a whisper, and it's high time we called it out. We're talking about the audacity of dreams, the gall of ambition when you dare to aspire beyond the limitations others impose on you based on your origin. It's like an invisible wall goes up, separating "us" from "them," and suddenly, your aspirations are seen as arrogance, your hopes as an affront. Why? Because how dare someone with an accent, someone from a place deemed "lesser," strive for the same things as everyone else? Let's be honest, this isn't just about accents or countries of origin. It's about power, about the deeply ingrained human need to feel superior, to establish a hierarchy, even if it's based on the flimsiest of pretexts. It's about the satisfaction some derive from putting others down, from asserting dominance, from making someone feel small. Think about it: how often have you witnessed someone subtly sneer at a foreign accent, dismiss an idea because of the speaker's background, or make assumptions about someone's intelligence based on their nationality? It's more common than we'd like to admit, and it's a reflection of a disturbing truth about human nature. We crave control, we crave validation, and sometimes, the easiest way to get it is to make someone else feel inferior. This isn't just about individual prejudice either; it's woven into the fabric of our societies. Look at the way resources are distributed, the way opportunities are allocated, the way narratives are shaped. Who gets the benefit of the doubt? Who gets access to education, healthcare, and a fair shot at success? More often than not, it's those who already hold power, those who fit the dominant mold. And for those who don't, the climb is steeper, the hurdles higher, the judgment harsher. It's a system that perpetuates inequality, that reinforces the notion that some people are simply born "better" than others. But what if we challenged that notion? What if we recognized the inherent worth and potential in every individual, regardless of their background? What if we celebrated diversity instead of using it as a weapon? {Second section Background content here, 700-1000 words} To understand this deeply rooted prejudice, we need to delve into the historical and cultural forces that have shaped our perceptions of "otherness." Let's go back centuries, to the era of colonialism and slavery, when entire populations were subjugated and dehumanized based on their origin and skin color. The idea of a racial hierarchy, with Europeans at the top and everyone else below, was not just a social construct; it was a carefully crafted ideology used to justify exploitation and oppression. This legacy continues to haunt us, influencing our unconscious biases and shaping our perceptions of those who are different. The master-slave dynamic, with its inherent power imbalance and dehumanization, laid the foundation for a culture where asserting dominance over others is seen as acceptable, even desirable. Fast forward to the present day, and we see echoes of this dynamic in countless interactions. Think about the subtle ways in which people from marginalized communities are treated: the microaggressions, the dismissive language, the lack of opportunities. It's a constant reminder that the playing field is not level, that the rules are rigged in favor of those who already hold power. And for those who dare to challenge the status quo, the backlash can be swift and brutal. They're labeled as "aggressive," "entitled," or "uppity" – all code words for stepping out of line, for daring to aspire beyond their "assigned" place in the hierarchy. But it's not just about historical oppression; it's also about the psychological need to feel superior. Humans are social creatures, and we're constantly comparing ourselves to others. It's a natural instinct, but it can also be a dangerous one. When we feel insecure or threatened, we often resort to putting others down to make ourselves feel better. This is where prejudice comes in. By creating an "out-group" – people who are different from us – we can reinforce our sense of belonging and superiority. And the easiest way to create an out-group is to focus on superficial differences like accent, skin color, or nationality. It's a lazy way of thinking, but it's incredibly effective in creating divisions and justifying discrimination. {Third section First Main Point content here, 700-1000 words} One of the most insidious ways this prejudice manifests is through the perception of arrogance. When someone from a marginalized background dares to dream big, to voice their ambitions, they're often met with accusations of arrogance. It's as if their aspirations are somehow inappropriate, presumptuous, even offensive. Think about it: a young immigrant arrives in a new country, works tirelessly to learn the language, excels in school, and sets their sights on a prestigious university. Instead of being celebrated for their hard work and determination, they might be accused of being "too ambitious" or "thinking they're better than everyone else." Their accent, which should be a testament to their resilience and adaptability, becomes a mark against them, a source of ridicule and suspicion. Why is this? Because their ambition challenges the existing power dynamic. It disrupts the comfortable narrative that certain groups are destined for success while others are relegated to the margins. It forces those in positions of privilege to confront their own biases and insecurities. And for some, it's easier to dismiss the ambitious outsider as arrogant than to acknowledge the systemic inequalities that have made their journey so much harder. It's a classic defense mechanism: blame the victim, question their motives, and avoid any introspection that might challenge your own worldview. Let's take a specific example. Imagine a young woman from a rural village in Africa who dreams of becoming a doctor. She overcomes incredible obstacles to get an education, works multiple jobs to support herself, and finally earns a scholarship to study medicine in a developed country. Now, imagine her encountering classmates who come from privileged backgrounds, who have never faced the same hardships, and who question her qualifications and her right to be there. They might whisper behind her back, make snide remarks about her accent, or subtly undermine her confidence. This isn't just about individual meanness; it's about a system that reinforces the idea that certain people are simply not meant to succeed. It's about the insidious power of prejudice to crush dreams before they even have a chance to take flight. {Fourth section Second Main Point content here, 700-1000 words} Beyond the accusation of arrogance, there's a deeper, more disturbing element at play: the dehumanization of the "other." When we reduce people to stereotypes, when we dismiss their experiences and aspirations, we strip them of their individuality and their humanity. This dehumanization makes it easier to justify discrimination, to treat people with contempt, to deny them basic rights and opportunities. It's a slippery slope that can lead to horrific consequences, from social exclusion to violence and genocide. History is replete with examples of how dehumanization has paved the way for atrocities, from the Holocaust to the Rwandan genocide. Think about the language we use to describe people from different backgrounds. How often do we hear words like "illegal," "alien," or "refugee" used in a dehumanizing way, stripping individuals of their names and their stories? How often are entire communities demonized based on the actions of a few? This kind of rhetoric creates a climate of fear and distrust, making it easier for people to accept prejudice and discrimination. It allows us to distance ourselves from the suffering of others, to see them as less than human, and to justify our own indifference or hostility. Let's consider another example. Imagine a group of migrant workers who have left their homes in search of a better life. They work long hours in grueling conditions, often facing exploitation and abuse. Yet, they're often portrayed in the media as a faceless mass, a drain on resources, a threat to national security. Their individual stories, their hopes and dreams, their contributions to society, are ignored or dismissed. This dehumanization makes it easier for politicians to enact policies that restrict their rights, for employers to exploit their labor, and for ordinary citizens to turn a blind eye to their plight. It's a vicious cycle that perpetuates inequality and injustice. {Fifth section Third Main Point content here, 700-1000 words} The roots of this dehumanizing tendency run deep, intertwining with historical power structures and psychological mechanisms. As we've discussed, the legacy of colonialism and slavery continues to cast a long shadow, shaping our perceptions of race, class, and nationality. But there are also deeper psychological factors at play. One of these is the concept of "in-group bias," the tendency to favor members of our own group over outsiders. This bias is deeply ingrained in human nature, and it can manifest in subtle and unconscious ways. We're more likely to trust, empathize with, and help people who are similar to us, while those who are different are often viewed with suspicion or hostility. Another factor is the need for certainty and control. In a complex and unpredictable world, it can be comforting to create simple categories and hierarchies. By dividing the world into "us" and "them," we create a sense of order and predictability. This need for control can also manifest in the desire to dominate others, to assert our power and status. And as we've seen, this desire for dominance can easily lead to dehumanization and discrimination. It's a way of justifying our own privilege and maintaining the status quo. Consider the way we often talk about "national identity." It's often defined in opposition to others, creating a sense of "us" versus "them." This can lead to a dangerous form of nationalism, where loyalty to one's own country is seen as requiring hostility towards outsiders. This kind of thinking can easily justify discrimination against immigrants, refugees, and anyone who is perceived as a threat to national unity. It's a powerful force that can be exploited by politicians and demagogues to sow division and hatred. {Sixth section Applications content here, 700-1000 words} So, what can we do to challenge these deeply ingrained prejudices? First and foremost, we need to acknowledge that they exist. We all have unconscious biases, and it's crucial to be aware of them so we can actively work to overcome them. This requires a willingness to examine our own thoughts and behaviors, to question our assumptions, and to listen to the experiences of others. It's not enough to simply say "I'm not prejudiced"; we need to actively challenge prejudice in ourselves and in others. Education is also crucial. We need to teach children about the history of prejudice and discrimination, about the dangers of stereotypes and dehumanization, and about the importance of empathy and understanding. This education should start early and continue throughout life. It's not just about learning facts; it's about developing critical thinking skills, fostering empathy, and promoting a culture of respect for diversity. But education alone is not enough. We also need to create systemic change. This means challenging discriminatory policies and practices, promoting diversity and inclusion in all aspects of society, and holding individuals and institutions accountable for their actions. It means creating a world where everyone has equal opportunities, regardless of their background. This requires a fundamental shift in our values and priorities, a move away from a culture of dominance and towards a culture of equality and respect. We can start by challenging discriminatory language and behavior whenever we encounter it. Whether it's a subtle microaggression or an overt act of prejudice, we need to speak up and let people know that their words and actions are unacceptable. This can be uncomfortable, but it's essential if we want to create a more just and equitable world. We also need to support organizations that are working to combat prejudice and discrimination, and to advocate for policies that promote equality and inclusion. [SECTION 7: Conclusion] {Seventh section Conclusion content here, end leaving the audience hooked and more to think about, , 700-1000 words} Ultimately, challenging prejudice requires a fundamental shift in perspective. We need to move away from a worldview that sees difference as a threat and towards one that celebrates diversity as a strength. We need to recognize that our shared humanity transcends our superficial differences, and that we all have something to contribute to the world. This isn't just about being "nice" or "politically correct"; it's about creating a society where everyone can thrive, where everyone can reach their full potential, and where everyone is treated with dignity and respect. Imagine a world where a person's accent is heard not as a marker of inferiority, but as a beautiful melody, a testament to their unique journey and cultural heritage. Imagine a world where ambition is celebrated, regardless of where someone comes from, where dreams are nurtured, not crushed by prejudice and discrimination. Imagine a world where difference is not a source of division, but a source of strength and innovation. This is the world we can create if we choose to challenge our biases, to embrace our shared humanity, and to build a future where everyone belongs. But this journey begins with each of us. It begins with the choices we make every day, the words we use, the actions we take. It begins with a willingness to listen, to learn, and to challenge our own assumptions. It begins with a commitment to building a world where everyone is valued, where everyone has a voice, and where everyone has the opportunity to live a life of dignity and purpose. The question is: are we willing to do the work? Are we willing to challenge the status quo, to confront our own biases, and to create a world where everyone has the chance to shine? The answer to that question will determine the future we create, not just for ourselves, but for generations to come. Let's choose wisely. Let the conversation continue, let the self-reflection deepen, and let the actions speak louder than words. The journey towards a truly equitable and just world is long and arduous, but it's a journey worth taking. And it starts with each and every one of us. So, let's begin.`; // Your full text here

async function testAudioProcessing() {
  try {
    console.log('Starting audio processing test...');

    // Step 1: Process text into chunks
    console.log('\n=== Text Processing ===');
    const chunks = TranscriptProcessor.processText(testText);
    console.log(`Split into ${chunks.length} chunks:`);
    chunks.forEach((chunk, i) => {
      console.log(`\nChunk ${i + 1}:`);
      console.log(`- Length: ${chunk.text.length} characters`);
      console.log(`- Word count: ${chunk.metadata.wordCount}`);
      console.log(`- Estimated duration: ${chunk.metadata.estimatedDuration.toFixed(2)} minutes`);
      console.log(`- Preview: "${chunk.text.substring(0, 100)}..."`);
    });

    // Step 2: Initialize parallel generator
    console.log('\n=== Parallel Generation Setup ===');
    const generator = new ParallelAudioGenerator(
      3, // Max concurrent generations
      (progress) => {
        console.log(`Generation progress: ${progress.overall.toFixed(2)}%`);
        progress.chunks.forEach(chunk => {
          console.log(`- Chunk ${chunk.chunkIndex + 1}: ${chunk.progress.toFixed(2)}% (${chunk.status})`);
        });
      }
    );

    // Step 3: Initialize audio assembler
    console.log('\n=== Audio Assembly Setup ===');
    const assembler = new AudioAssembler((progress) => {
      console.log(`Assembly progress: ${progress.phase} - ${progress.progress.toFixed(2)}%`);
    });

    // Log total estimated processing time
    const totalDuration = TranscriptProcessor.getEstimatedTotalDuration(chunks);
    const totalWords = TranscriptProcessor.getTotalWordCount(chunks);
    console.log('\n=== Processing Estimates ===');
    console.log(`Total word count: ${totalWords}`);
    console.log(`Estimated total duration: ${totalDuration.toFixed(2)} minutes`);
    console.log(`Number of parallel workers: 3`);
    console.log(`Estimated processing time: ${(totalDuration / 3).toFixed(2)} minutes`);

    return {
      chunks,
      totalWords,
      totalDuration,
      estimatedProcessingTime: totalDuration / 3
    };

  } catch (error) {
    console.error('Error in audio processing test:', error);
    throw error;
  }
}

// Run the test
testAudioProcessing().then(result => {
  console.log('\n=== Test Complete ===');
  console.log('Results:', result);
}).catch(error => {
  console.error('Test failed:', error);
processTextToAudio().catch(console.error);
